!function(z){"use strict";const a="crossWord";var M={sizeX:0,sizeY:0,riddles:[],completed:!1,won:!1,startTime:null,endTime:null,instructions:"Answer the riddles below to solve the cross word:",labels:{acrossLabel:"Across:",downLabel:"Down:"},css:{gameMainContainerClass:"game-main-container",gamePanelContainerClass:"game-container-panel",gameRiddleContainerClass:"game-container-riddle",gamePanelClass:"game-panel",gamePanelRowClass:"game-panel-row",gamePanelCellClass:"game-panel-cell",gamePanelCellAcrossNumberClass:"game-panel-cell-across-number",gamePanelCellDownNumberClass:"game-panel-cell-down-number",gameCellWhiteClass:"game-cell-white",gameCellBlackClass:"game-cell-black",gameCellCorrectClass:"game-cell-correct",gameCellIncorrectClass:"game-cell-incorrect",gameCellValueClass:"game-cell-value",riddleBoxClass:"riddle-box",riddleSectionHeadingClass:"riddle-section-heading",riddleNumberClass:"riddle-number",riddleClass:"riddle",riddleInputClass:"riddle-input",riddleAnswerClass:"riddle-answer"}};function n(e,s){const a=e instanceof jQuery?e:z(e);var u={settings:null,completed:!1,gameMap:[]};if(u.settings=z.extend(!0,{},M,s),!u.settings.riddles)throw"riddles list not provided.";for(var e=z("<div class='"+u.settings.css.gameMainContainerClass+"'></div>"),s=z("<div class='"+u.settings.css.gamePanelContainerClass+"'></div>").appendTo(e),n=z("<div class='"+u.settings.css.gameRiddleContainerClass+"'></div>").appendTo(e),t=(u.gameMap=x(u.settings.sizeX,u.settings.sizeY,""),z.each(u.settings.riddles,function(e,s){for(var a=s.location.x,n=s.location.y,t=s.answerLength,l=s.across?1:0,i=s.across?0:1,r=0;r<t;r++)u.gameMap[n+r*i][a+r*l]="+"}),z.grep(u.settings.riddles,function(e){return!!e.across})),l=z.grep(u.settings.riddles,function(e){return!e.across}),i=z("<div class='"+u.settings.css.gamePanelClass+"'></div>").appendTo(s),r=z("<div class='"+u.settings.css.gamePanelRowClass+"'></div>"),d=z("<div class='"+u.settings.css.gamePanelCellClass+"'><div class='"+u.settings.css.gameCellValueClass+"'></div></div>"),o=z("<div class='"+u.settings.css.gamePanelCellAcrossNumberClass+"'></div>"),c=z("<div class='"+u.settings.css.gamePanelCellDownNumberClass+"'></div>"),g=0;g<u.settings.sizeY;g++){for(var p=r.clone(),C=0;C<u.settings.sizeX;C++){var m=d.clone().data("x",C).data("y",g);!function(a,s,n){var e=z.grep(u.settings.riddles,function(e){return e.location.x==s&&e.location.y==n});z.each(e,function(e,s){s.across?a.append(o.clone().append(s.id)):a.append(c.clone().append(s.id))})}(m,C,g),""!=u.gameMap[g][C]?m.addClass(u.settings.css.gameCellWhiteClass):m.addClass(u.settings.css.gameCellBlackClass),p.append(m)}i.append(p)}var s=z("<div class='"+u.settings.css.riddleBoxClass+"'></div>"),v=z("<div class='"+u.settings.css.riddleNumberClass+"'></div>"),f=z("<div class='"+u.settings.css.riddleClass+"'></div>"),h=z("<div class='"+u.settings.css.riddleAnswerClass+"'></div>");function w(n,t,e,l,i,r,d){z.each(e,function(e,s){var a=i.clone().appendTo(n);l.clone().append(s.id).appendTo(a),r.clone().append(s.hint).appendTo(a),d.clone().appendTo(a).append(z("<input type='text' class='"+u.settings.css.riddleInputClass+"' maxlength="+s.answerLength+" />").data("id",s.id).on("input",function(e){t.find("."+u.settings.css.gameCellValueClass).empty(),z.each(u.settings.riddles,function(e,a){var s=a.answerLength,n=P(z("."+u.settings.css.riddleInputClass).filter(function(e,s){return z(s).data("id")==a.id}));if(n)for(var t=z(n).val().toUpperCase(),l=Math.min(t.length,s),i=a.location,r=a.across?1:0,d=a.across?0:1,o=0;o<s;o++){var c=t.charAt(o),g=y(i.x+o*r,i.y+o*d);o<l&&g.find("."+u.settings.css.gameCellValueClass).empty().append(c)}})}))})}function b(){var e=z("."+u.settings.css.gameRiddleContainerClass).find("."+u.settings.css.riddleInputClass);return z.map(e,function(e){e=z(e);return{id:e.data("id"),value:e.val()}})}function P(e){return e instanceof jQuery?e&&e.length&&e[0]?e[0]:null:e&&Array.isArray(e)&&e.length&&e[0]?e[0]:null}function y(a,n){return i.find("."+u.settings.css.gamePanelCellClass).filter(function(e,s){return z(s).data("x")==a&&z(s).data("y")==n})}function x(e,s,a){for(var n=[],t=0;t<s;t++){for(var l=[],i=0;i<e;i++)l.push(a);n.push(l)}return n}return z("<div class='"+u.settings.css.riddleSectionHeadingClass+"' >"+u.settings.labels.acrossLabel+"</div>").appendTo(n),w(n,i,t,v,s,f,h),z("<div class='"+u.settings.css.riddleSectionHeadingClass+"' >"+u.settings.labels.downLabel+"</div>").appendTo(n),w(n,i,l,v,s,f,h),a.append(e),{isSolved:function(e){var a,s=b();return a=s,z.map(e,function(s){var e=P(z.grep(a,function(e){return e.id==s.id}));if(e)return{id:s.id,value:s.value,isValid:s.value==e.value};throw"invalid parameter provided."}).reduce(function(e,s){return e&&s.isValid},!0)&&e&&e.length&&s.length},showResults:function(m){var v=b(),f=x(u.settings.sizeX,u.settings.sizeY,"-"),h=x(u.settings.sizeX,u.settings.sizeY,"-");z.each(u.settings.riddles,function(e,s){var a=s.location.x,n=s.location.y,t=s.answerLength,l=s.across?1:0,i=s.across?0:1,r=z.grep(m,function(e){return e.id==s.id}),d=z.grep(v,function(e){return e.id==s.id}),r=P(r),o=P(d);if(r)for(var c=r.value,g=Math.min(c.length,t),u=0;u<g;u++){var p=a+u*l,C=n+u*i;f[C][p]=c.charAt(u),o&&o.value&&o.value.length<=g&&(h[C][p]=o.value.charAt(u))}});for(var e=0;e<u.settings.sizeY;e++)for(var s,a=0;a<u.settings.sizeX;a++)"+"==u.gameMap[e][a]&&(s=y(a,e),f[e][a]==h[e][a]?s.removeClass(u.settings.css.gameCellIncorrectClass).addClass(u.settings.css.gameCellCorrectClass):s.removeClass(u.settings.css.gameCellCorrectClass).addClass(u.settings.css.gameCellIncorrectClass))},markCompleted:function(){u.completed=!0,n.find("input").prop("disabled",!0)},isMarkedCompleted:function(){return u.completed},getProgress:b}}n.prototype={isSolved:function(){isSolved()},showResults:function(){showResults()},markCompleted:function(){markCompleted()},isMarkedCompleted:function(){return isMarkedCompleted()},getProgress:function(){return getProgress()}},z.fn[a]=function(s){return this.each(function(){var e;z.data(this,a)||(e=new n(this,s),z.data(this,a,e))})}}(jQuery,(window,document));